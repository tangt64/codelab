FROM tomcat:10.1-jre25-temurin

# 1) Tomcat default apps 제거
RUN rm -rf /usr/local/tomcat/webapps/*

# 2) Tomcat은 기본 포트(8080)를 사용

# 3) WAR 배포 (ROOT 컨텍스트)
COPY blog/blog/target/blog.war /usr/local/tomcat/webapps/ROOT.war

# (옵션) 헬스체크
HEALTHCHECK --interval=30s --timeout=3s --start-period=20s --retries=3 \
  CMD curl -fsS http://127.0.0.1:8080/ || exit 1
